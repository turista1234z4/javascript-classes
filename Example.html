<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example</title>
</head>

<body>

</body>
<script>
    class Utils {
        static IdiomaDoSistema = "pt-br";
        static ConfigDate = {
            hour: "2-digit",
            minute: "2-digit"
        };

        static GetFormatedDate() {
            let date = new Date();
            return date.toLocaleDateString(this.IdiomaDoSistema, this.ConfigDate);
        }
    }

    class Conta {
        constructor(nome, numero, saldo) {
            this.nome = nome;
            this.numero = numero;
            this.saldo = saldo;
            this.extrato = [];
        }

        get ImprimirExtrato() {
            console.log(`----- Extrato da Conta ------`);
            this.extrato.forEach(item => {
                console.log(item);
            });
            console.log(`----- Fim do Extrato ------`);
        }

        RegistrarNoExtrato(item) {
            this.extrato.push(item);
        }
    }

    class Poupanca extends Conta {
        #TaxaDeSaque = 0.10;

        saque(Valor) {
            let TaxaDeSaqueDoValor = Valor * this.#TaxaDeSaque;
            let ValorDeSaque = Valor + TaxaDeSaqueDoValor;

            if (ValorDeSaque > this.saldo) {
                throw new Error(`Saldo insuficiente`);
            } else {
                this.saldo = this.saldo - ValorDeSaque;
                this.RegistrarNoExtrato(`${Utils.GetFormatedDate()} - Saque: R$${Valor} --- Saldo: R$${this.saldo}`);
                console.log(`O saldo atual após o saque é de R$${this.saldo}`);
            }
        }

        deposito(Valor) {
            this.saldo = this.saldo + Valor;
            this.RegistrarNoExtrato(`${Utils.GetFormatedDate()} - Depósito: R$${Valor} --- Saldo: R$${this.saldo}`);
        }
    }

    let nome = prompt('Digite seu nome');
    let saldo_conta = parseFloat(prompt('Quanto saldo você deseja iniciar na sua conta?'));

    let NovaContaPoupança = new Poupanca(nome, Math.floor(Math.random() * 99999) + 1, saldo_conta);

    let opcoes = prompt(`Ok, digite 1 para acessar sua conta, 2 para realizar um saque e 3 para realizar um depósito`);

    if (opcoes == 1) {
        NovaContaPoupança.ImprimirExtrato;
    } else if (opcoes == 2) {
        let Valor_saque = parseFloat(prompt("Digite quanto deseja sacar:"));
        NovaContaPoupança.saque(Valor_saque);
    } else if (opcoes == 3) {
        let Valor_Deposito = parseFloat(prompt("Digite quanto deseja depositar:"));
        NovaContaPoupança.deposito(Valor_Deposito);
    }

    NovaContaPoupança.ImprimirExtrato;
</script>

</html>
